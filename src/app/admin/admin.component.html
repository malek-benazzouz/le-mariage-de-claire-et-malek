<app-header [hasNavigation]="false"></app-header>

<!-- Login info and logout button -->
<div id="login-info" class="px-4 pt-4 d-flex justify-content-between align-items-center" *ngIf="isAuthenticated$ | async">
  <span>Connecté en tant que&nbsp;: {{ userEmail$ | async }}</span>
  <button class="btn btn-outline-secondary ml-2" (click)="logout()">Se déconnecter</button>
</div>

<!-- Confirmations summary -->
<div id="confirmations-wrapper" class="d-flex justify-content-around">
  <div id="confirmations-summary-card" class="card my-5">
    <div class="card-body">
      <app-section-title title="CONFIRMATIONS" [subtitle]="rsvpSummary"></app-section-title>

      <!-- Login form - if user is not authenticated -->
      <div *ngIf="(isAuthenticated$ | async) === false" class="text-center">
        <p class="mt-3">Veuillez vous identifier pour accéder à ce contenu&nbsp;:</p>
        <!-- Email -->
        <mat-form-field appearance="fill" class="m-1">
          <mat-label>Email</mat-label>
          <input matInput placeholder="toto@titi.com" [(ngModel)]="email">
        </mat-form-field>
        <!-- Password -->
        <mat-form-field appearance="fill" class="m-1">
          <mat-label>Mot de passe</mat-label>
          <input matInput [type]="hidePassword ? 'password' : 'text'" [(ngModel)]="password">
          <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword">
            <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </mat-form-field>
        <!-- Login button -->
        <p>
          <button class="btn btn-outline-secondary" (click)="login()">S'identifier</button>
        </p>
        <!-- Login error if any -->
        <p class="mat-error" *ngIf="loginErrorMessage">{{ loginErrorMessage }}</p>
      </div>

      <!-- RSVP Responses - if user is authenticated -->
      <div *ngIf="(isAuthenticated$ | async) && (rsvpResponses$ | async)">
        <div *ngFor="let response of rsvpResponses$ | async">
          <hr>
          <app-rsvp-summary [response]="response" [isAdmin]="true"></app-rsvp-summary>
        </div>
      </div>

    </div>
  </div>
</div>

<app-footer></app-footer>
